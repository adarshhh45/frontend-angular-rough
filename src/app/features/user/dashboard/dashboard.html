<div class="dashboard-container fade-in">
  <!-- Welcome Header -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1 class="welcome-title">
        Welcome Back! 
        <span class="wave">ðŸ‘‹</span>
      </h1>
      <p class="welcome-subtitle">Here's what's happening with your metro account today.</p>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="stats-grid">
    <mat-card class="stat-card wallet-card">
      <div class="stat-icon-wrapper wallet-icon">
        <mat-icon>account_balance_wallet</mat-icon>
      </div>
      <div class="stat-content">
        <p class="stat-label">Wallet Balance</p>
        <div *ngIf="isLoading" class="stat-loading">
          <div class="skeleton-loader"></div>
        </div>
        <h2 *ngIf="!isLoading && wallet" class="stat-value">
          {{ wallet.balance | currency:'INR':'symbol':'1.0-0' }}
        </h2>
        <button mat-stroked-button color="primary" class="stat-action" (click)="openRechargeDialog()">
          <mat-icon>add</mat-icon>
          Recharge
        </button>
      </div>
    </mat-card>

    <mat-card class="stat-card tickets-card">
      <div class="stat-icon-wrapper tickets-icon">
        <mat-icon>confirmation_number</mat-icon>
      </div>
      <div class="stat-content">
        <p class="stat-label">Active Tickets</p>
        <h2 class="stat-value">0</h2>
        <a mat-stroked-button color="primary" class="stat-action" routerLink="/user/ticket-history">
          <mat-icon>visibility</mat-icon>
          View All
        </a>
      </div>
    </mat-card>

    <mat-card class="stat-card transactions-card">
      <div class="stat-icon-wrapper transactions-icon">
        <mat-icon>history</mat-icon>
      </div>
      <div class="stat-content">
        <p class="stat-label">Recent Transactions</p>
        <h2 *ngIf="wallet" class="stat-value">{{ wallet.transactions.length }}</h2>
        <a mat-stroked-button color="primary" class="stat-action" routerLink="/user/wallet">
          <mat-icon>receipt_long</mat-icon>
          Details
        </a>
      </div>
    </mat-card>
  </div>

  <!-- Quick Actions -->
  <div class="section">
    <h2 class="section-title">
      <mat-icon>bolt</mat-icon>
      Quick Actions
    </h2>
    <div class="actions-grid">
      <mat-card class="action-card primary-action" routerLink="/user/book-ticket">
        <div class="action-icon">
          <mat-icon>subway</mat-icon>
        </div>
        <div class="action-content">
          <h3>Book Ticket</h3>
          <p>Reserve your metro ticket now</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>

      <mat-card class="action-card" routerLink="/user/ticket-history">
        <div class="action-icon">
          <mat-icon>history</mat-icon>
        </div>
        <div class="action-content">
          <h3>My Tickets</h3>
          <p>View your booking history</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>

      <mat-card class="action-card" routerLink="/user/wallet">
        <div class="action-icon">
          <mat-icon>account_balance</mat-icon>
        </div>
        <div class="action-content">
          <h3>Wallet</h3>
          <p>Manage your transactions</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>

      <mat-card class="action-card" routerLink="/user/profile">
        <div class="action-icon">
          <mat-icon>person</mat-icon>
        </div>
        <div class="action-content">
          <h3>Profile</h3>
          <p>Update your information</p>
        </div>
        <mat-icon class="action-arrow">arrow_forward</mat-icon>
      </mat-card>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="section" *ngIf="wallet && wallet.transactions.length > 0">
    <h2 class="section-title">
      <mat-icon>timeline</mat-icon>
      Recent Activity
    </h2>
    <mat-card class="activity-card">
      <mat-list>
        <mat-list-item *ngFor="let tx of wallet.transactions.slice(0, 5)">
          <div matListItemIcon class="activity-icon" [ngClass]="tx.type === 'CREDIT' ? 'credit' : 'debit'">
            <mat-icon>{{ tx.type === 'CREDIT' ? 'arrow_downward' : 'arrow_upward' }}</mat-icon>
          </div>
          <div matListItemTitle class="activity-title">
            {{ tx.type === 'CREDIT' ? 'Wallet Recharged' : 'Ticket Purchased' }}
          </div>
          <div matListItemLine class="activity-time">
            {{ tx.transactionTime | date:'short' }}
          </div>
          <div class="activity-amount" [ngClass]="tx.type === 'CREDIT' ? 'credit' : 'debit'">
            {{ (tx.type === 'CREDIT' ? '+' : '-') + (tx.amount | currency:'INR':'symbol':'1.0-0') }}
          </div>
        </mat-list-item>
      </mat-list>
    </mat-card>
  </div>

  <!-- Tips Section -->
  <div class="section tips-section">
    <mat-card class="tips-card">
      <div class="tips-header">
        <mat-icon>lightbulb</mat-icon>
        <h3>Quick Tips</h3>
      </div>
      <ul class="tips-list">
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Book tickets in advance to avoid queues</span>
        </li>
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Keep your wallet recharged for quick bookings</span>
        </li>
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Download your ticket QR code for offline use</span>
        </li>
      </ul>
    </mat-card>
  </div>
</div>